# 00 | 引言

1. 写烂代码和好代码花费的时间是差不多的
   - 写好的代码一开始可能比较不自在，但是原来的那种自在实际上是某种混乱，可能会引发更多的时间来修改，所以一开始就关注代码质量，实际上是节省时间的。并且一旦培养成写高质量代码的习惯，并不会多花多少时间。
2. 当你把写高质量代码培养成一种开发习惯之后，在你在编写代码的时候，自然就有一种代码质量意识，自然而然就可以写出不错的代码
3. 至少要知道什么是高质量的代码
   - 高质量的代码有一定的原则和方法
4. 最有效、最快速提高编码能力的方法就是，找一个比你资深的工程师，一对一、手把手地指导你写代码。你提交代码，他来指出你的问题，你再优化，这样一来一往，要不了多久，你就会发现，自己的代码能力突飞猛进
   - 实际情况是，大家都忙着迭代，谁会一行一行地帮你批改代码呢，遇到这样的大佬也太幸运了

# 01 | 为什么每个程序员都要尽快地学习并掌握设计模式相关知识

1. 设计模式和数据结构算法更容易直接转化为生产力，了解学习设计模式相关知识能直接提高开发能力。
2. 为什么学习设计模式
   - 平时积累，应对面试设计
   - **避免写烂代码**，写规范的、设计合理、分层清晰、模块化、代码结构清晰、松耦合的代码。写好代码，会让别人对你的代码产生好感。
   - **提高复杂代码的设计和开发能力**
   - **读源码、学框架的需要**（实际上，除了看不懂、看不下去的问题，还有一个隐藏的问题，你可能自己都发现不了，那就是你自己觉得看懂了，实际上，里面的精髓你并没有 get 到多少！因为优秀的开源项目、框架、中间件，就像一个集各种高精尖技术在一起的战斗机。如果你想剖析它的原理、学习它的技术，而你没有积累深厚的基本功，就算把这台战斗机摆在你面前，你也不能完全参透它的精髓，只是了解个皮毛，看个热闹而已。）
   - **通往更高层次必须要迈过去的坎**，无论是评审其他人、代码还是带团队还是保证系统稳定性
   - **投资要趁早**，这样我们才能尽早享受复利。同样，有些能力，要早点锻炼；有些东西，要早点知道；有些书，要早点读。这样在你后面的生活、工作、学习中，才能一直都发挥作用。不要等到好多年后，看到了，才恍然大悟，后悔没有早点去学、去看。内功要尽早学习，日后公里才能深厚。

# 02 | 从哪些维度评判代码质量的好坏？如何具备写出高质量代码的能力？

1. 实际上，我们很难通过其中的某个或者某几个词汇来全面地评价代码质量
2. 除此之外，不同的评价维度也并不是完全独立的，有些是具有包含关系、重叠关系或者可以互相影响的。比如，代码的可读性好、可扩展性好，就意味着代码的可维护性好。而且，各种评价维度也不是非黑即白的。比如，我们不能简单地将代码分为可读与不可读。如果用数字来量化代码的可读性的话，它应该是一个连续的区间值，而非 0、1 这样的离散值。
3. 对一段代码的质量评价，常常有很强的主观性。跟工程师自身的经验有极大的关系。自己闷头写，写得多也不一定有提高。

最常见的评价标准：

## 可维护性

- 所谓的“维护”无外乎就是修改 bug、修改老的代码、添加新的代码之类的工作。所谓“代码易维护”就是指，在不破坏原有代码设计、不引入新的 bug 的情况下，能够快速地修改或者添加代码。所谓“代码不易维护”就是指，**修改或者添加代码需要冒着极大的引入新 bug 的风险，并且需要花费很长的时间才能完成。**
- 对于一个项目来说，**维护代码的时间远远大于编写代码的时间**
- 代码的可维护性是由很多因素协同作用的结果。代码的可读性好、简洁、可扩展性好，就会使得代码易维护。
- 更细化地讲，如果**代码分层清晰、模块化好、高内聚低耦合、遵从基于接口而非实现编程的设计原则**等等，那就可能意味着代码易维护
- 代码的易维护性还跟**项目代码量的多少、业务的复杂程度、利用到的技术的复杂程度、文档是否全面、团队成员的开发水平**等诸多因素有关。

## 可读性

- 代码被阅读的次数远远超过被编写和执行的次数
- 代码的可读性应该是评价代码质量最重要的指标之一
- 代码的可读性在非常大程度上会影响代码的可维护性
- 我们需要看代码是否符合编码规范、命名是否达意、注释是否详尽、函数是否长短合适、模块划分是否清晰、是否符合高内聚低耦合等等

## 可扩展性

- 它表示我们的代码应对未来需求变化的能力。
- 代码是否易扩展也很大程度上决定代码是否易维护
- 我们在不修改或少量修改原有代码的情况下，通过扩展的方式添加新的功能代码。

## 灵活性

- 同样是很抽象的评价。如果一段代码易扩展、易复用或者易用，我们都可以称这段代码写得比较灵活。

## 简洁性

- KISS 原则：“Keep It Simple，Stupid”。这个原则说的意思就是，尽量保持代码简单。代码简单、逻辑清晰，也就意味着易读、易维护。

## 可复用性

- 代码的可复用性可以简单地理解为，尽量减少重复代码的编写，复用已有的代码

## 可测试性

- 代码的可测试性差，比较难写单元测试，那基本上就能说明代码设计得有问题。

面向对象中的继承、多态能让我们写出可复用的代码；编码规范能让我们写出可读性好的代码；设计原则中的单一职责、DRY、基于接口而非实现、里式替换原则等，可以让我们写出可复用、灵活、可读性好、易扩展、易维护的代码；设计模式可以让我们写出易扩展的代码；持续重构可以时刻保持代码的可维护性等等。

要写出高质量代码，我们就需要掌握一些更加细化、更加能落地的编程方法论，这就包含**面向对象设计思想、设计原则、设计模式、编码规范、重构技巧**等等

# 03 | 面向对象、设计原则、设计模式、编程规范、重构，这五者有何关系？

## 面向对象

- 面向对象的四大特性：封装、抽象、继承、多态
- 面向对象编程与面向过程编程的区别和联系
- 面向对象分析、面向对象设计、面向对象编程
- 接口和抽象类的区别以及各自的应用场景
- 基于接口而非实现编程的设计思想
- 多用组合少用继承的设计思想
- 面向过程的贫血模型和面向对象的充血模型

## 设计原则

要知道设计原则是为了解决什么编程问题，应用在什么场景中，而不是单纯的记忆

- SOLID 原则 -SRP 单一职责原则
- SOLID 原则 -OCP 开闭原则
- SOLID 原则 -LSP 里式替换原则
- SOLID 原则 -ISP 接口隔离原则
- SOLID 原则 -DIP 依赖倒置原则
- DRY 原则、KISS 原则、YAGNI 原则、LOD 法则

## 设计模式

设计模式是针对软件开发中经常遇到的一些设计问题，总结出来的一套解决方案或者设计思路。大部分设计模式要解决的都是**代码的可扩展性问题**。设计模式相对于设计原则来说，没有那么抽象，而且大部分都不难理解，代码实现也并不复杂。这一块的学习难点是了解它们都**能解决哪些问题，掌握典型的应用场景**，并且懂得不过度应用。

- 创建型常用的有：单例模式、工厂模式（工厂方法和抽象工厂）、建造者模式。
  - 不常用的有：原型模式。
- 结构型常用的有：代理模式、桥接模式、装饰者模式、适配器模式。
  - 不常用的有：门面模式、组合模式、享元模式。
- 行为型常用的有：观察者模式、模板模式、策略模式、职责链模式、迭代器模式、状态模式。
  - 不常用的有：访问者模式、备忘录模式、命令模式、解释器模式、中介模式。

## 编程规范

编程规范主要解决的是代码的可读性问题。编码规范相对于设计原则、设计模式，更加具体、更加偏重代码细节。即便你可能对设计原则不熟悉、对设计模式不了解，但你最起码要掌握基本的编码规范，比如，如何给变量、类、函数命名，如何写代码注释，函数不宜过长、参数不能过多等等。

代码最起码要做到规范！！！

## 代码重构

- **持续重构**是保持代码质量不下降的有效手段，能有效避免代码腐化到无可救药的地步。
- 重构的目的（why）、对象（what）、时机（when）、方法（how）；
- 保证重构不出错的技术手段：**单元测试和代码的可测试性**；
- 两种不同规模的重构：大重构（大规模高层次）和小重构（小规模低层次）
- 把重构当作开发的一部分，融入到日常的开发中。

